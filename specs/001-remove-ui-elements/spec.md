# Feature Specification: 運動記録フォームと履歴表示のシンプル化

**Feature Branch**: `001-remove-ui-elements`
**Created**: 2026-01-09
**Status**: Draft
**Input**: User description: "いらない箇所がある。記録する日時は押したタイミングの日時で良いので別に選択肢はいらないです。フィルタ機能もいらないです。（対象は運動記録のみ）"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 運動記録の即時登録 (Priority: P1)

ユーザーが運動を完了した直後に、現在時刻で素早く記録を登録できる。日時選択の手間を省き、記録の心理的ハードルを下げる。

**Why this priority**: 記録アプリの最大の課題は「継続性」。日時選択というステップが追加の摩擦となり、ユーザーが記録を後回しにする原因になっている。現在時刻での自動記録により、ユーザーは運動直後にワンタップで記録を完了できる。

**Independent Test**: 運動入力フォームで種目・セット数・回数を入力して「記録する」ボタンを押すと、現在時刻で記録が保存され、履歴に即座に反映される。

**Acceptance Scenarios**:

1. **Given** ユーザーが運動記録ページにアクセスしている、**When** 種目・セット数・回数を入力して「記録する」ボタンを押す、**Then** 現在時刻で記録が保存され、成功メッセージが表示される
2. **Given** 記録が保存された後、**When** 記録履歴を確認する、**Then** 保存された記録の日時が現在時刻（記録時点）となっている
3. **Given** ユーザーが運動入力フォームを表示している、**When** フォームを確認する、**Then** 日時入力フィールドが表示されていない

---

### User Story 2 - シンプルな運動履歴表示 (Priority: P2)

ユーザーが運動履歴をフィルタなしで一覧表示できる。すべての記録を時系列で確認し、運動の全体像を把握できる。

**Why this priority**: フィルタ機能は特定の種目に絞り込む用途で便利だが、ユーザーの主な目的は「最近の運動記録を確認する」こと。フィルタUIが常に表示されることで、画面が複雑になり、本質的な情報（記録一覧）への注目を妨げている。シンプルな一覧表示により、ユーザーは自分の運動習慣を直感的に把握できる。

**Independent Test**: 運動記録ページで履歴を確認すると、すべての記録が時系列で表示され、フィルタUI（ドロップダウン）が表示されていない。

**Acceptance Scenarios**:

1. **Given** ユーザーが運動記録ページにアクセスしている、**When** 記録履歴セクションを確認する、**Then** すべての運動記録が時系列で表示され、フィルタドロップダウンが表示されていない
2. **Given** 複数の異なる種目の記録が存在する、**When** 履歴を確認する、**Then** すべての種目の記録が混在して時系列順に表示される
3. **Given** ユーザーが履歴を閲覧している、**When** 画面をスクロールする、**Then** フィルタUIが表示されず、記録一覧のみに集中できる

---

### Edge Cases

- **過去の記録を編集する場合**: 既存の記録を編集する際は、記録日時は変更されず、元の日時が保持される（編集時刻で上書きされない）
- **複数の記録を短時間で連続登録する場合**: それぞれの記録登録時の現在時刻が個別に保存され、秒単位で時系列が正確に記録される
- **時刻の自動記録エラー**: クライアントの時刻が不正（未来の日時など）な場合でも、サーバー側で記録時刻を検証・補正する

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: システムは運動記録フォームから日時入力フィールドを削除しなければならない
- **FR-002**: システムは運動記録保存時に、ユーザーが「記録する」ボタンを押した時点の現在時刻（クライアント時刻）を自動的に記録日時として設定しなければならない
- **FR-003**: システムは運動記録ページから種目フィルタUIを削除しなければならない
- **FR-004**: システムは運動記録履歴をすべての種目を含めて時系列順に表示しなければならない
- **FR-005**: システムは記録編集時に、元の記録日時を保持し、編集時刻で上書きしてはならない

### Key Entities

- **運動記録 (Exercise Record)**: 運動種目、セット数、回数、記録日時を含む。記録日時は記録保存時の現在時刻で自動設定される。

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: ユーザーは運動記録を3ステップ以内（種目選択 → 数値入力 → 記録ボタン）で完了できる
- **SC-002**: 運動記録フォームから日時入力フィールドが完全に削除され、視覚的にシンプルなUIとなる
- **SC-003**: 運動記録ページから種目フィルタUIが完全に削除され、履歴一覧に集中できるレイアウトとなる
- **SC-004**: すべての新規運動記録の日時が、記録ボタンを押した時点の現在時刻（秒単位）で正確に保存される
- **SC-005**: 運動記録完了までの所要時間が、日時選択が不要になることで平均30%短縮される

## Assumptions *(mandatory)*

- ユーザーは記録を作成する時点で、その時刻を記録したいと考えている（過去や未来の時刻で記録したいニーズは想定しない）
- 既存の記録を編集する機能は残され、編集時に日時が変更されないことが前提
- クライアントの時刻が概ね正確である（ユーザーのデバイス時刻設定が大幅にずれていない）
- 運動履歴では、すべての種目を混在して時系列で確認することが主な用途である（特定種目への絞り込みニーズは低い）

## Dependencies *(include if applicable)*

- 既存のバックエンドAPI (`POST /api/exercises`) が `recordedAt` フィールドをオプショナルとして受け入れ、未指定時にサーバー時刻またはクライアントから送信された時刻を使用する実装になっていること
- フロントエンドの日時バリデーション機能（未来日時の検証など）が削除されても、データ整合性が保たれること

## Out of Scope *(include if applicable)*

- 食事記録フォームの変更（日時入力は維持）
- 体重記録フォームの変更（現状維持）
- 食事履歴ページでの日付選択機能（既存のカレンダー機能は維持）
- 過去や未来の任意の日時で記録を作成する機能（将来的なニーズがあれば別機能として検討）
- 種目別の統計や分析機能（フィルタUI削除により実現困難になる機能は、別の形式での実装を検討）
- 記録の一括編集や日時の一括変更機能
