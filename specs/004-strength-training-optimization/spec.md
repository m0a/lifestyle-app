# Feature Specification: 筋トレ最適化運動記録

**Feature Branch**: `004-strength-training-optimization`
**Created**: 2026-01-01
**Status**: Draft
**Input**: User description: "運動記録は筋トレに最適化してほしい"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 筋トレメニュー記録 (Priority: P1)

ユーザーは筋トレのセット・レップ・重量を記録したい。現在の運動記録は「時間」のみで、筋トレに必要な「セット数」「回数（レップ）」「重量」が記録できない。

**Why this priority**: 筋トレにおいて最も重要なのはセット・レップ・重量の記録。これがないと筋トレ記録として成立しない。

**Independent Test**: 「ベンチプレス 3セット x 10回 x 60kg」を記録して履歴に反映されることを確認

**Acceptance Scenarios**:

1. **Given** 運動記録画面にいる, **When** 筋トレ種目を選択する, **Then** セット数・回数・重量の入力欄が表示される
2. **Given** 筋トレ種目を選択している, **When** 「3セット x 10回 x 60kg」と入力して記録する, **Then** 履歴に「ベンチプレス 3x10 60kg」と表示される
3. **Given** 筋トレ種目を選択している, **When** 重量なしで記録する（自重トレーニング）, **Then** 「プッシュアップ 3x15」と表示される

---

### User Story 2 - よく使う筋トレ種目のクイック選択 (Priority: P1)

ユーザーは毎回同じ筋トレメニューを入力するのが面倒。よく使う種目をすぐに選べるようにしたい。

**Why this priority**: 入力の手間を減らすことでユーザーが継続して記録できる。P1として必須。

**Independent Test**: 種目選択画面で「ベンチプレス」「スクワット」などがボタンで表示され、タップで選択できる

**Acceptance Scenarios**:

1. **Given** 運動記録画面にいる, **When** 筋トレカテゴリを選択する, **Then** 一般的な筋トレ種目（ベンチプレス、スクワット、デッドリフト等）がボタンで表示される
2. **Given** 種目一覧が表示されている, **When** 「ベンチプレス」をタップする, **Then** 種目が選択されセット入力画面に遷移する

---

### User Story 3 - 前回記録の参照・コピー (Priority: P2)

ユーザーは前回のトレーニング内容を参照して、同じか少し増やした重量で記録したい。

**Why this priority**: 筋トレの進捗管理に必須だが、まずは記録機能が先。

**Independent Test**: ベンチプレスを選択時に「前回: 3x10 60kg」と表示され、タップで入力欄にコピーできる

**Acceptance Scenarios**:

1. **Given** 筋トレ種目を選択する, **When** その種目の過去記録がある, **Then** 直近の記録が参考表示される
2. **Given** 前回記録が表示されている, **When** 「前回と同じ」ボタンをタップする, **Then** 入力欄に前回の値がセットされる

---

### User Story 4 - 筋トレ履歴のフィルタ・検索 (Priority: P2)

ユーザーは特定の種目の履歴だけを見たい。

**Why this priority**: 履歴が増えると特定種目を探すのが大変になる。

**Independent Test**: 履歴一覧で「ベンチプレス」でフィルタすると該当記録のみ表示される

**Acceptance Scenarios**:

1. **Given** 運動履歴画面にいる, **When** 種目でフィルタする, **Then** 該当種目の記録のみ表示される
2. **Given** 複数種目の記録がある, **When** 「スクワット」でフィルタする, **Then** スクワットの記録のみ表示される

---

### Edge Cases

- 重量が0の場合（自重トレーニング）→ 重量欄は空またはオプショナルとして扱う
- セット間で回数や重量が異なる場合 → 各セットごとに入力可能とする（P2以降で検討）
- 片手/片足種目の記録 → メモ欄で対応（将来的に左右別記録を検討）

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: システムは筋トレ種目の記録時に「セット数」「回数（レップ）」「重量（kg）」を入力できる必要がある
- **FR-002**: システムは一般的な筋トレ種目（ベンチプレス、スクワット、デッドリフト、ショルダープレス等）をプリセットとして提供する必要がある
- **FR-003**: システムは筋トレ種目ごとの前回記録を表示できる必要がある
- **FR-004**: システムは運動履歴を種目でフィルタできる必要がある
- **FR-005**: ユーザーはカスタム筋トレ種目を追加できる必要がある
- **FR-006**: 重量は任意入力とし、自重トレーニングに対応する必要がある

### Key Entities

- **Exercise Record（筋トレ専用に再設計）**:
  - exerciseType: 種目名
  - sets: セット数
  - reps: 回数/レップ
  - weight: 重量kg（オプショナル、自重トレの場合null）
  - recordedAt: 記録日時

- **Exercise Preset**: プリセット種目
  - name: 種目名
  - muscleGroup: 部位（chest/back/legs/shoulders/arms/core など）

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: ユーザーは筋トレ1種目を30秒以内に記録できる
- **SC-002**: 前回記録をコピーして記録する場合、10秒以内に完了できる
- **SC-003**: 種目でのフィルタ結果が1秒以内に表示される

## Assumptions

- 運動記録は筋トレ専用に再設計する（有酸素運動は対象外）
- 既存データがないため後方互換性は不要
- 重量の単位はkgのみ（lbsへの対応は将来検討）
- 1セット内は同じ重量・回数とする（ドロップセット等は将来検討）
- ユーザーの筋トレ頻度は週2-5回程度を想定
