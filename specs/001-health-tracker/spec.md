# Feature Specification: Health Tracker

**Feature Branch**: `001-health-tracker`
**Created**: 2025-12-27
**Status**: Draft
**Input**: 運動・食事・体重管理のトラッキングアプリ。リアルタイム記録と振り返り分析機能を提供

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 体重記録 (Priority: P1)

ユーザーは毎日の体重を記録し、推移を確認できる。体重管理はすべての生活習慣改善の基盤となる指標である。

**Why this priority**: 体重は最もシンプルで測定しやすい指標であり、運動・食事の効果を可視化する基本データとなる。1つの数値を入力するだけで価値を提供できるため、MVPとして最適。

**Independent Test**: 体重を入力し、グラフで推移を確認できれば、単独で価値を提供できる

**Acceptance Scenarios**:

1. **Given** ユーザーがログインしている状態で, **When** 体重（例: 70.5kg）を入力して保存する, **Then** 記録が保存され、今日の記録として表示される
2. **Given** 過去7日間の体重記録がある状態で, **When** 体重推移画面を開く, **Then** 折れ線グラフで体重の変化が表示される
3. **Given** 体重記録がある状態で, **When** 過去の記録を編集する, **Then** 記録が更新され、グラフにも反映される

---

### User Story 2 - 食事記録 (Priority: P2)

ユーザーは毎日の食事内容を記録し、食生活を振り返ることができる。

**Why this priority**: 食事は体重に直接影響する重要な要素。体重記録と組み合わせることで、食事と体重の関係を分析できる。

**Independent Test**: 食事を記録し、1日の食事一覧を確認できれば、単独で価値を提供できる

**Acceptance Scenarios**:

1. **Given** ユーザーがログインしている状態で, **When** 朝食として「トースト、コーヒー」を記録する, **Then** 記録が保存され、今日の食事リストに表示される
2. **Given** 食事記録がある状態で, **When** カロリーを追加入力する（任意）, **Then** 1日の合計カロリーが計算される
3. **Given** 1週間分の食事記録がある状態で, **When** 週間レポートを表示する, **Then** 食事のパターンや傾向が表示される

---

### User Story 3 - 運動記録 (Priority: P3)

ユーザーは運動内容と時間を記録し、運動習慣を把握できる。

**Why this priority**: 運動は体重管理の重要な要素だが、食事より記録頻度が低いため優先度を下げる。

**Independent Test**: 運動を記録し、週間の運動時間を確認できれば、単独で価値を提供できる

**Acceptance Scenarios**:

1. **Given** ユーザーがログインしている状態で, **When** 運動種目（例: ウォーキング）と時間（30分）を記録する, **Then** 記録が保存され、今日の運動として表示される
2. **Given** 運動記録がある状態で, **When** 週間サマリーを表示する, **Then** 運動の種類別時間と合計が表示される

---

### User Story 4 - 振り返りダッシュボード (Priority: P4)

ユーザーは体重・食事・運動のデータを統合したダッシュボードで進捗を振り返ることができる。

**Why this priority**: 各データの記録機能が揃った後、それらを統合して価値を高める機能。

**Independent Test**: ダッシュボードで3種類のデータを一覧でき、期間別の傾向を確認できる

**Acceptance Scenarios**:

1. **Given** 1週間以上の記録がある状態で, **When** ダッシュボードを開く, **Then** 体重推移、食事カロリー推移、運動時間が一覧表示される
2. **Given** ダッシュボードを表示している状態で, **When** 期間を「月間」に切り替える, **Then** 過去1ヶ月のデータが表示される

---

### Edge Cases

- ユーザーが同じ日に複数回体重を記録した場合、最新の記録を優先表示する
- 食事のカロリー入力がない場合、カロリー集計はスキップされる
- 長期間（30日以上）記録がない場合、再開時に励ましのメッセージを表示する
- ネットワークエラー時、ローカルに一時保存し、復旧後に同期する

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: ユーザーはメールアドレスとパスワードでアカウントを作成できること
- **FR-002**: ユーザーは体重を小数点1桁まで記録できること（例: 70.5kg）
- **FR-003**: ユーザーは食事内容をテキストで記録できること
- **FR-004**: ユーザーは食事にカロリー（任意）を追加できること
- **FR-005**: ユーザーは運動種目と時間（分単位）を記録できること
- **FR-006**: システムは過去の記録を日別・週別・月別で表示できること
- **FR-007**: ユーザーは過去の記録を編集・削除できること
- **FR-008**: ユーザーは自分のすべてのデータをエクスポートできること
- **FR-009**: ユーザーはアカウントとすべてのデータを完全に削除できること
- **FR-010**: システムはネットワーク切断時もローカルで記録を継続できること

### Key Entities

- **User**: アカウント情報（メールアドレス、パスワードハッシュ）、設定（目標体重、単位設定）
- **WeightRecord**: 体重値、記録日時、ユーザーとの関連
- **MealRecord**: 食事内容テキスト、食事タイプ（朝/昼/夜/間食）、カロリー（任意）、記録日時
- **ExerciseRecord**: 運動種目、時間（分）、記録日時

### Assumptions

- 体重の単位はkgをデフォルトとする（将来的にlbs対応を検討）
- カロリー計算は手動入力を前提とする（自動計算は将来機能）
- 運動種目は自由入力とする（プリセットは将来機能）

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: ユーザーは3タップ以内で体重を記録できる
- **SC-002**: ユーザーは1分以内に食事を記録できる
- **SC-003**: 週間レポートは2秒以内に表示される
- **SC-004**: 70%以上のユーザーが1週間以上継続して記録する
- **SC-005**: ユーザーは5分以内にアカウント作成から最初の記録まで完了できる
- **SC-006**: システムは1000人の同時利用者をサポートできる
