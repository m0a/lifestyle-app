name = "lifestyle-tracker"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[assets]
directory = "./public"
binding = "ASSETS"
not_found_handling = "single-page-application"

[vars]
ENVIRONMENT = "production"
AI_PROVIDER = "google"
AI_MODEL = "gemini-2.0-flash"

[[d1_databases]]
binding = "DB"
database_name = "health-tracker-db"
database_id = "86957e0a-04b6-4530-9b64-79ea36c64ba5"

# R2 bucket for meal photos
[[r2_buckets]]
binding = "PHOTOS"
bucket_name = "lifestyle-app-photos"

# Preview environment configuration
[env.preview]
name = "lifestyle-tracker-preview"

[env.preview.vars]
ENVIRONMENT = "preview"
AI_PROVIDER = "google"
AI_MODEL = "gemini-2.0-flash"

[[env.preview.d1_databases]]
binding = "DB"
database_name = "health-tracker-preview-db"
database_id = "1c90e1fa-f2b7-4518-94b4-0ae192ff6a7b"

[[env.preview.r2_buckets]]
binding = "PHOTOS"
bucket_name = "lifestyle-app-photos"
